[gcode_macro UNLOAD_FILAMENT]
gcode:
    SAVE_GCODE_STATE NAME=UNLOADFILAMENT
    SET_LOGO_LEDS_BY_NAME COLOR="RED" ; From SB LED CFG!
    M83
    G0 E10 F300
    G0 E-5 F3600
    G4 P3000
    G0 E5 F3600
    G0 E-15 F3600
    G1 E-120 F300
    M400
    SET_LOGO_LEDS_BY_NAME COLOR="PURPLE" ; From SB LED CFG!
    RESTORE_GCODE_STATE NAME=UNLOADFILAMENT

[gcode_macro LOAD_FILAMENT]
gcode:
    SAVE_GCODE_STATE NAME=LOADFILAMENT
    SET_LOGO_LEDS_BY_NAME COLOR="RED" ; From SB LED CFG!
    M83
    G1 E120 F400
    M400
    SET_LOGO_LEDS_BY_NAME COLOR="PURPLE" ; From SB LED CFG!
    RESTORE_GCODE_STATE NAME=LOADFILAMENT
   
[gcode_macro HOT_UNLOAD]
gcode:
    {% set t = params.T|default(260)|int %}

    SET_LOGO_LEDS_BY_NAME COLOR="RED" ; From SB LED CFG!
    Park_Front_Center
    M109 S{t}
    UNLOAD_FILAMENT
    
[gcode_macro HOT_LOAD]
gcode:
    {% set t = params.T|default(260)|int %}

    SET_LOGO_LEDS_BY_NAME COLOR="RED" ; From SB LED CFG!
    Park_Front_Center
    M109 S{t}
    LOAD_FILAMENT
